/**
 * restful-app
 * @version v0.0.1 - 2014-07-06
 * @link 
 * @author  <>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("restfulApp",["angularFileUpload","autofields","ngResource"],function(a){a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8";var b=function(a){var c,d,e,f,g,h,i,j="";for(c in a)if(d=a[c],d instanceof Array)for(i=0;i<d.length;++i)g=d[i],e=c+"["+i+"]",h={},h[e]=g,j+=b(h)+"&";else if(d instanceof Object)for(f in d)g=d[f],e=c+"["+f+"]",h={},h[e]=g,j+=b(h)+"&";else void 0!==d&&null!==d&&(j+=encodeURIComponent(c)+"="+encodeURIComponent(d)+"&");return j.length?j.substr(0,j.length-1):j};a.defaults.transformRequest=[function(a){var c=angular.isObject(a)&&"[object File]"!==String(a)?b(a):a;return console.log(a),c}]}),angular.module("restfulApp").controller("MainCtrl",["$scope","DrupalSettings","ArticlesResource","$log",function(a,b,c,d){var e=b.getAutoFieldsData("article");a.serverSide={},a.schema=e.schema,a.data=e.data,a.options=e.options,a.submitForm=function(){d.info(a.article.$valid?"valid":"not valid, but checking server side"),d.log(a.data),c.createArticle(a.data).success(function(b,c){a.serverSide.data=b,a.serverSide.status=c,d.log(a.serverSide)}).error(function(b,c){a.serverSide.data=b,a.serverSide.status=c,d.log(a.serverSide)}),d.log()}}]),angular.module("restfulApp").service("ArticlesResource",["DrupalSettings","$http","$log",function(a,b){this.createArticle=function(c){var d={withCredentials:!0,headers:{"X-CSRF-Token":a.getCsrfToken()}};return console.log(a.getCsrfToken()),b.post(a.getBasePath()+"api/v1/articles",c,d)}}]),angular.module("restfulApp").service("DrupalSettings",["$window",function(a){var b=this;this.settings=a.Drupal.settings,this.getBasePath=function(){return angular.isDefined(b.settings.restfulExample.basePath)?b.settings.restfulExample.basePath:void 0},this.getCsrfToken=function(){return angular.isDefined(b.settings.restfulExample.csrfToken)?b.settings.restfulExample.csrfToken:void 0},this.getAutoFieldsData=function(a){return angular.isDefined(b.settings.restfulExample.autoFieldsData[a])?b.settings.restfulExample.autoFieldsData[a]:{}}}]);